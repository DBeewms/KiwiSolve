{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>{% block title %}KiwiSolve · Álgebra Lineal{% endblock %}</title>
  <!-- Fuente Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Tokens y estilos globales -->
  <link rel="stylesheet" href="{% static 'css/kiwisolve.css' %}">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <link rel="stylesheet" href="{% static 'css/layout.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/buttons.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/theme-toggle.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/forms.css' %}">
  <link rel="stylesheet" href="{% static 'css/themes/kiwisolve-dark.css' %}">
  <!-- MathLive (math-field) styles per official docs -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mathlive/dist/mathlive-static.css" />
  {% block extra_head %}{% endblock %}
  <script>
    // Inicialización de tema: SIEMPRE claro por defecto salvo preferencia guardada
    (() => {
      try {
        const root = document.documentElement;
        const stored = localStorage.getItem('ks-theme');
        const mode = stored ? stored : 'light';
        if (mode === 'dark') {
          root.setAttribute('data-theme', 'dark');
          root.classList.add('dark'); // compatibilidad
        } else {
          root.setAttribute('data-theme', 'light');
          root.classList.remove('dark');
        }
      } catch (_) {}
    })();
  </script>
</head>
<body>
  {% include 'partials/_header.html' %}
  <main class="main container">
    {% block content %}{% endblock %}
  </main>
  {% include 'partials/_footer.html' %}
  <!-- SweetAlert2 para alertas modernas -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- MathLive para entrada matemática visual (CDN recomendado) -->
  <script src="https://cdn.jsdelivr.net/npm/mathlive/dist/mathlive.min.js"></script>
  <script src="{% static 'js/theme-toggle.js' %}"></script>
  <script src="{% static 'js/ui.js' %}"></script>
  <script src="{% static 'js/mathlive-adapter.js' %}"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>
