/*
  buttons.css – Componente de botones reutilizables
  Variantes: default, .secondary, .outline
  Personalización rápida: sobreescribe --_bg, --_bg-hover, --_color a nivel de instancia.
*/

.button {
  --_bg: var(--ks-color-violet-blue);
  --_bg-hover: var(--ks-color-savoy);
  --_color: #fff;
  display: inline-flex; align-items: center; gap: .5rem;
  padding: .6rem 1rem;
  border-radius: var(--ks-radius-sm);
  font-weight: 600;
  font-size: .95rem;
  line-height: 1.1;
  background: var(--_bg);
  color: var(--_color);
  border: none;
  cursor: pointer;
  box-shadow: var(--ks-shadow-sm);
  transition: background .2s, transform .15s;
  text-decoration: none;
}
.button:hover { background: var(--_bg-hover); }
.button:active { transform: translateY(1px); }
.button.secondary { --_bg: var(--ks-color-royal-purple); --_bg-hover: var(--ks-color-grape); }
.button.outline { background: transparent; color: var(--ks-color-violet-blue); border: 1px solid var(--ks-color-violet-blue); }
.button.outline:hover { background: var(--ks-color-violet-blue); color:#fff; }
.button.outline:focus-visible { outline: 2px solid color-mix(in srgb, var(--ks-color-violet-blue) 45%, var(--ks-color-savoy)); outline-offset: 3px; }

/* Modo oscuro: mejorar contraste del botón outline */
html[data-theme='dark'] .button.outline {
  color: color-mix(in srgb, #ffffff 92%, var(--ks-color-violet-blue));
  border-color: color-mix(in srgb, var(--ks-color-violet-blue) 75%, #ffffff);
}
html[data-theme='dark'] .button.outline:hover {
  background: color-mix(in srgb, var(--ks-color-violet-blue) 82%, #000000);
  color: #fff;
}
html[data-theme='dark'] .button.outline:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--ks-color-violet-blue) 60%, var(--ks-color-savoy));
  outline-offset: 3px;
}

/* Variantes cromáticas adicionales basadas en tokens */
.button.sky { --_bg: var(--ks-color-sky); --_bg-hover: color-mix(in srgb, var(--ks-color-sky) 78%, var(--ks-color-savoy)); }
.button.grape { --_bg: var(--ks-color-grape); --_bg-hover: color-mix(in srgb, var(--ks-color-grape) 85%, var(--ks-color-royal-purple)); }
.button.savoy { --_bg: var(--ks-color-savoy); --_bg-hover: color-mix(in srgb, var(--ks-color-savoy) 80%, var(--ks-color-violet-blue)); }
.button.violet { --_bg: var(--ks-color-violet-blue); --_bg-hover: var(--ks-color-savoy); }

/* Botón de énfasis con gradiente (para acciones principales como Calcular) */
.button.gradient {
  background: linear-gradient(135deg, var(--ks-color-violet-blue) 0%, var(--ks-color-royal-purple) 50%, var(--ks-color-grape) 100%);
  border: none;
  color: #fff;
  position: relative;
  overflow: hidden;
}
.button.gradient:hover {
  background: linear-gradient(135deg, var(--ks-color-savoy) 0%, var(--ks-color-royal-purple) 55%, var(--ks-color-grape) 100%);
}
.button.gradient:focus-visible { outline: 2px solid color-mix(in srgb, var(--ks-color-grape) 60%, var(--ks-color-savoy)); outline-offset: 3px; }
.button.gradient:active { transform: translateY(1px); }

/* Modo oscuro: preservar contraste del gradiente */
html[data-theme='dark'] .button.gradient { box-shadow: 0 0 0 1px rgba(255,255,255,.08), var(--ks-shadow-sm); }

/* Variante ghost (fondo transparente, sólo texto en gama azul→morado) */
.button.ghost {
  background: transparent;
  color: var(--ks-color-violet-blue);
  border: 1px solid transparent;
  box-shadow: none;
}
.button.ghost:hover {
  background: color-mix(in srgb, var(--ks-color-violet-blue) 12%, transparent);
}
.button.ghost:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--ks-color-violet-blue) 50%, var(--ks-color-savoy));
  outline-offset: 3px;
}

/* Floating Action Button: teclado MathLive */
.fab {
  position: fixed;
  right: 3rem;    /* aún menos pegado a la esquina */
  bottom: 7rem;   /* un poco más arriba */
  z-index: 3200;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 60px;    /* botón más grande */
  height: 60px;   /* botón más grande */
  border-radius: 999px;
  border: none;
  background: linear-gradient(135deg, var(--ks-color-violet-blue) 0%, var(--ks-color-royal-purple) 60%, var(--ks-color-grape) 100%);
  color: #fff;
  box-shadow: 0 8px 24px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.12);
  cursor: pointer;
}
.fab:hover { filter: brightness(1.05); }
.fab:active { transform: translateY(1px); }
.fab:focus-visible { outline: 3px solid color-mix(in srgb, var(--ks-color-savoy) 60%, var(--ks-color-violet-blue)); outline-offset: 3px; }
.fab svg { pointer-events: none; width: 28px; height: 28px; }

html[data-theme='dark'] .fab { box-shadow: 0 0 0 1px rgba(255,255,255,.08), 0 8px 24px rgba(0,0,0,.55); }

/* Cuando el teclado virtual está visible, elevar el FAB por encima de él */
body.vk-visible .fab {
  bottom: calc(var(--vk-height, 0px) + 1rem);
}
